<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fantasy Name Generator</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      background: #1e1e2f;
      color: #eee;
      text-align: center;
      padding: 20px;
    }
    h1 {
      font-size: 2em;
      color: #f7c74c;
    }
    .name-display {
      font-size: 1.8em;
      margin: 20px 0;
    }
    .slot-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 20px 0;
    }
    .slot {
      background: #2c2c40;
      border: 2px solid #444;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      width: 80px;
    }
    .locked {
      background: #3a603f;
      border-color: #6de086;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1em;
      background: #f7c74c;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      color: #000;
    }
    .avatar {
      margin-top: 30px;
    }
    .avatar img {
      border-radius: 50%;
      border: 3px solid #f7c74c;
      width: 128px;
      height: 128px;
    }
  </style>
</head>
<body>
  <h1>Fantasy Name Generator</h1>
  <div class="name-display" id="nameDisplay">???</div>
  <div class="slot-container" id="slots"></div>
  <div class="slot-container" id="classContainer"></div>
  <div class="slot-container" id="locationContainer"></div>
  <button onclick="roll()">ðŸŽ² Roll All</button>
  <div class="avatar" id="avatarContainer"></div>

  <script>
    const syllables = [
      "dra", "vel", "zor", "morn", "kai", "lyr", "grim", "thal", "sha", "nur",
      "vak", "glen", "mir", "ael", "vor", "nis", "ser", "zel", "rin", "ark",
      "tor", "bal", "eth", "zan", "kre", "uld", "yor", "xan", "om", "fen"
    ];

    const classes = [
      "Knight", "Warlock", "Assassin", "Necromancer", "Witch",
      "Scholar", "Thief", "Bard", "Priestess", "Waitress",
      "Hunter", "Druid", "Warden", "Seer", "Wizard"
    ];

    const locations = [
      "of Donar", "of the Hollow", "from Eldralore", "of the Vale",
      "of Ashenfall", "from the North", "of Dreadmoor", "of Emberkeep"
    ];

    const slots = Array(6).fill(null).map((_, i) => ({ locked: false, value: "" }));
    let selectedClass = { locked: false, value: "" };
    let selectedLocation = { locked: false, value: "" };

    function randomizeWord(baseList) {
      let word = baseList[Math.floor(Math.random() * baseList.length)];
      if (Math.random() < 0.1 && word.length > 2) {
        const removeIndex = Math.floor(Math.random() * word.length);
        word = word.slice(0, removeIndex) + word.slice(removeIndex + 1);
      }
      if (Math.random() < 0.1) {
        const insertIndex = Math.floor(Math.random() * (word.length + 1));
        const insertChar = String.fromCharCode(97 + Math.floor(Math.random() * 26));
        word = word.slice(0, insertIndex) + insertChar + word.slice(insertIndex);
      }
      return word;
    }

    function render() {
      const slotContainer = document.getElementById("slots");
      slotContainer.innerHTML = "";

      slots.forEach((slot, i) => {
        const div = document.createElement("div");
        div.className = "slot" + (slot.locked ? " locked" : "");
        div.textContent = slot.value || "???";
        div.onclick = () => {
          slot.locked = !slot.locked;
          render();
        };
        slotContainer.appendChild(div);
      });

      const classDiv = document.getElementById("classContainer");
      classDiv.innerHTML = "";
      const classSlot = document.createElement("div");
      classSlot.className = "slot" + (selectedClass.locked ? " locked" : "");
      classSlot.textContent = selectedClass.value || "Class";
      classSlot.onclick = () => {
        selectedClass.locked = !selectedClass.locked;
        render();
      };
      classDiv.appendChild(classSlot);

      const locationDiv = document.getElementById("locationContainer");
      locationDiv.innerHTML = "";
      const locationSlot = document.createElement("div");
      locationSlot.className = "slot" + (selectedLocation.locked ? " locked" : "");
      locationSlot.textContent = selectedLocation.value || "Location";
      locationSlot.onclick = () => {
        selectedLocation.locked = !selectedLocation.locked;
        render();
      };
      locationDiv.appendChild(locationSlot);

      const name = slots.map(s => s.value).join(" ");
      document.getElementById("nameDisplay").textContent = name;

      const avatar = document.getElementById("avatarContainer");
      const seed = encodeURIComponent(name);
      avatar.innerHTML = `<img src="https://avatars.dicebear.com/api/adventurer/${seed}.svg" alt="avatar" />`;
    }

    function roll() {
      slots.forEach(slot => {
        if (!slot.locked) slot.value = randomizeWord(syllables);
      });
      if (!selectedClass.locked) selectedClass.value = classes[Math.floor(Math.random() * classes.length)];
      if (!selectedLocation.locked) selectedLocation.value = locations[Math.floor(Math.random() * locations.length)];
      render();
    }

    roll();
  </script>
</body>
</html>
