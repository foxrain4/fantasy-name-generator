<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Fantasy Name Generator</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      background-color: #1b1b1b;
      color: #f4f4f4;
      text-align: center;
      padding: 2rem;
    }
    .slot-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .slot {
      background-color: #2d2d2d;
      border: 2px solid #444;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      position: relative;
    }
    .slot input[type="checkbox"] {
      position: absolute;
      top: -5px;
      right: -5px;
      transform: scale(1.5);
    }
    button {
      background-color: #4b2e83;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
      margin: 1rem;
    }
    #nameDisplay {
      font-size: 1.5rem;
      font-weight: bold;
      margin: 1rem 0;
      color: #e2b714;
    }
    #classDisplay {
      font-size: 1.2rem;
      color: #9ae19d;
    }
    #avatar {
      width: 150px;
      height: 150px;
      margin: 1rem auto;
      border-radius: 50%;
      border: 2px solid #ccc;
      display: block;
    }
  </style>
</head>
<body>

  <h1>Fantasy Name Generator</h1>

  <div class="slot-container" id="slots">
    <!-- Slots will be dynamically added -->
  </div>

  <div>
    <button onclick="generateName()">Roll All</button>
  </div>

  <div id="nameDisplay"></div>
  <img id="avatar" src="" alt="Avatar">
  <div id="classDisplay"></div>

  <script>
    const syllables = [
      "dra", "vel", "zor", "morn", "kai", "lyr", "grim", "thal", "sha", "nur",
      "vak", "glen", "mir", "ael", "vor", "nis", "ser", "zel", "rin", "ark",
      "tor", "gorn", "quor", "zeth", "brak", "cryn", "dren", "elth", "fae",
      "goth", "hal", "ith", "jor", "kul", "lek", "mor", "nel", "osk", "pyre",
      "ryk", "sol", "tyr", "ul", "vek", "wyr", "xan", "yor", "zan"
    ];

    const classes = [
      "Knight", "Warlock", "Assassin", "Necromancer", "Witch", "Scholar",
      "Thief", "Bard", "Priestess", "Waitress", "Hunter", "Druid", "Warden",
      "Wizard of Donar", "Cleric of Ashvale", "Sentinel of the Mire", "Oracle of Vex",
      "Shadowblade of Karth", "Wanderer of the Wastes"
    ];

    const slots = [];

    function mutateWord(word) {
      const rand = Math.random();
      if (rand < 0.1 && word.length > 2) {
        // Remove one letter
        const i = Math.floor(Math.random() * word.length);
        return word.slice(0, i) + word.slice(i + 1);
      } else if (rand < 0.2) {
        // Add one letter
        const i = Math.floor(Math.random() * (word.length + 1));
        const letter = String.fromCharCode(97 + Math.floor(Math.random() * 26));
        return word.slice(0, i) + letter + word.slice(i);
      }
      return word;
    }

    function generateName() {
      for (let i = 0; i < 6; i++) {
        const checkbox = document.getElementById(`lock${i}`);
        if (!checkbox.checked) {
          const random = syllables[Math.floor(Math.random() * syllables.length)];
          document.getElementById(`slot${i}`).textContent = mutateWord(random);
        }
      }

      // Assemble name from slots 0-2 and 3-5
      const front = [0,1,2].map(i => document.getElementById(`slot${i}`).textContent).join('');
      const end = [3,4,5].map(i => document.getElementById(`slot${i}`).textContent).join('');
      const displayName = `${front} ${end}`;
      document.getElementById("nameDisplay").textContent = displayName;

      // Class & Location
      const classSlot = document.getElementById("lock6");
      if (!classSlot.checked) {
        const randClass = classes[Math.floor(Math.random() * classes.length)];
        document.getElementById("slot6").textContent = randClass;
      }

      const fullClass = document.getElementById("slot6").textContent;
      document.getElementById("classDisplay").textContent = fullClass;

      // Avatar (new API format)
      const seed = displayName.replace(/\s/g, '');
      document.getElementById("avatar").src = `https://api.dicebear.com/7.x/adventurer/svg?seed=${seed}`;
    }

    function createSlots() {
      const container = document.getElementById("slots");
      for (let i = 0; i < 7; i++) {
        const div = document.createElement("div");
        div.className = "slot";
        div.innerHTML = `<span id="slot${i}">---</span><input type="checkbox" id="lock${i}" title="Lock">`;
        container.appendChild(div);
      }
    }

    createSlots();
    generateName();
  </script>
</body>
</html>
